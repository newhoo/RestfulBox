# RESTKit

[è‹±æ–‡](./README.md) | [Gitee](https://gitee.com/newhoo/RESTKit)

[RESTKit](https://plugins.jetbrains.com/plugin/14723-restkit) æ˜¯ä¸€å¥—åŠŸèƒ½å¼ºå¤§çš„ Restful æœåŠ¡å¼€å‘è¾…åŠ©å·¥å…·é›†ã€‚

æœ¬æ’ä»¶è‡´åŠ›äºæå‡å¼€å‘æ•ˆç‡ä¹‹ä½œï¼Œåªæœ‰å®ç”¨å¸¸ç”¨çš„åŠŸèƒ½ã€‚æºäºæœ€åˆç‰ˆæœ¬çš„RestfulToolkitï¼ŒåŒæ—¶åŠ å…¥Postmançš„å¸¸ç”¨åŠŸèƒ½ï¼Œä¸°å¯Œä¸”å®Œå–„çš„åŠŸèƒ½èƒ½æå¤§åœ°æé«˜Ideaå¼€å‘çš„æ•ˆç‡ã€‚å…è´¹åˆ†äº«ç»™å¤§å®¶ä½¿ç”¨ï¼Œä¸ç”¨äºå•†ä¸šç”¨é€”ã€‚ä¸ªäººä¹‹åŠ›ï¼Œéš¾å…æœ‰ç–å¿½ï¼Œå¦‚æœ‰ä½¿ç”¨é—®é¢˜ï¼Œè¯·åé¦ˆäºæˆ‘ã€‚

å¦‚æœä½ è§‰å¾—æœ¬æ’ä»¶ä¸é”™ï¼Œè¯·èµä¸ªå¥½è¯„å§ï¼ŒåŒæ—¶ä¹Ÿæ¬¢è¿æä¾›å®è´µçš„å»ºè®®ã€‚ğŸŒŸ Star | [Ratings](https://plugins.jetbrains.com/plugin/14723-restkit/reviews)

## åŠŸèƒ½
- æ”¯æŒæ›´å¤šçš„jetbrainsäº§å“ï¼Œä¸ä»…ä»…æ˜¯idea
- RestfulæœåŠ¡è‡ªåŠ¨æ‰«æä¸å±•ç¤º
    - åŸç”ŸSearch Everywhereæ”¯æŒrestful URLæœç´¢ ( <kbd>Ctrl \\</kbd> or <kbd>Ctrl Alt N</kbd> )
    - çª—å£æ˜¾ç¤º Services tree
    - URLå’ŒMethodç›¸äº’è·³è½¬
- å¼ºå¤§å¥½ç”¨çš„HTTPè¯·æ±‚å·¥å…·ï¼š
    - è‡ªå®šä¹‰å‚æ•°æ ¼å¼ï¼Œæ”¯æŒå ä½ç¬¦å˜é‡ï¼ŒJSONè‡ªåŠ¨æ ¼å¼åŒ–
    - ç¯å¢ƒå˜é‡ï¼šæ”¯æŒå˜é‡ä½¿ç”¨ã€ç®¡ç†åŠè¿ç§»ï¼Œæä¾›å†…ç½®å‡½æ•°å’Œè„šæœ¬å‡½æ•°
    - å…¨å±€è¯·æ±‚å¤´ï¼šæ”¯æŒå’Œç¯å¢ƒå˜é‡ä¸€èµ·ä½¿ç”¨ï¼Œæä¾›å†…ç½®å‡½æ•°å’Œè„šæœ¬å‡½æ•°
    - å‚æ•°åº“ï¼šæ”¯æŒHeadersã€Paramsã€Bodyå‚æ•°å±•ç¤ºã€ä¿å­˜å’Œåˆ é™¤
    - è¯·æ±‚è„šæœ¬ï¼šæ”¯æŒå‰ç½®/åç½®è¯·æ±‚è„šæœ¬
    - HTTPæŠ¥æ–‡å±•ç¤º
- æ—¥å¿—ä¿å­˜ï¼šæ”¯æŒä¿å­˜HTTPæŠ¥æ–‡æ ¼å¼çš„è¯·æ±‚æ—¥å¿—ï¼›
- æ’ä»¶æ‰©å±•ï¼šç”¨æˆ·å¯å®ç°å…¶ä»–æ¡†æ¶çš„æ¥å£æ‰«æï¼›
- è¯­è¨€å’Œæ¡†æ¶ï¼š
  - é»˜è®¤æ”¯æŒæœ¬åœ°APIå­˜å‚¨
  - ideaé»˜è®¤æ”¯æŒ Spring ä½“ç³» (Spring MVC / Spring Boot with Java or Kotlin)


## å®‰è£…
- **æ’ä»¶å¸‚åœºå®‰è£…**

æ¨è <kbd>Preferences(Settings)</kbd> > <kbd>Plugins</kbd> > <kbd>Browse repositories...</kbd> > <kbd>è¾“å…¥"RESTKit"</kbd> > <kbd>ç‚¹å‡»Install</kbd>

- **æœ¬åœ°å®‰è£…**

ä»ä»“åº“ä¸‹è½½<kbd>distributions/RESTKit-x.x.x.zip</kbd>, ç„¶ååœ¨æœ¬åœ°Ideaå®‰è£… <kbd>Preferences(Settings)</kbd> > <kbd>Plugins</kbd> > <kbd>Install Plugin from Disk...</kbd>

## ä½¿ç”¨

### RESTKit Tool window
æ‰“å¼€é¡¹ç›®ï¼Œæ‰¾åˆ°çª—å£å³è¾¹çš„RESTKitï¼Œæ‰“å¼€ã€‚çª—å£ä¸»è¦ç”± **Toolbar**ã€**service tree**ã€**http client** æ„æˆã€‚ä»¥ä¸‹åˆ†åˆ«ä»‹ç»ï¼š

![tool window](images/tool_window.png)

#### Toolbar
- åˆ·æ–°ï¼šå¦‚æœæ²¡æœ‰æ‰¾åˆ°æ›´æ–°çš„apiï¼Œç‚¹å‡»åˆ·æ–°å›¾æ ‡
- æœç´¢ï¼šæ‰“å¼€search everywhereæœç´¢service url
- è¿‡æ»¤ï¼šæŒ‰ç…§http methodè¿‡æ»¤
- æ‰«æä¾èµ–ï¼šé€‰ä¸­æ—¶å¯æœç´¢ä¾èµ–åŒ…ä¸­çš„restful services
- è®¾ç½®ï¼šå¯æ‰“å¼€æ’ä»¶é…ç½®å’Œç¯å¢ƒå˜é‡é…ç½®

![](images/toolbar.png)

#### service tree
- æŒ‰æ¨¡å—å±•ç¤ºé¡¹ç›®ä¸­æœç´¢åˆ°çš„restful servicesï¼Œæ”¯æŒideaè‡ªèº«çš„è¾“å…¥æœç´¢
- åœ¨URLä¸ŠåŒå‡»ï¼Œå¯è·³è½¬åˆ°æºç çš„Method
- åœ¨URLä¸Šå³é”®ï¼Œå±•ç¤ºå³é”®èœå•

![](images/tree.png)

#### HTTP client
- ç¯å¢ƒå˜é‡ï¼šä¸‹æ‹‰é€‰æ‹©å·²æ·»åŠ çš„ç¯å¢ƒå˜é‡ç»„ï¼Œä¸å­˜åœ¨æ—¶ä¼šè·³è½¬åˆ°ç¯å¢ƒå˜é‡é…ç½®é¡µé¢ã€‚é¼ æ ‡Hoveræ—¶å¯é¢„è§ˆå½“å‰ç¯å¢ƒå˜é‡
- Methodï¼šhttp methodï¼Œä¸€èˆ¬ä¸éœ€è¦æ‰‹åŠ¨é€‰æ‹©
- URLï¼šhttpè¯·æ±‚çš„uriï¼Œä¸€èˆ¬ä¸éœ€è¦æ‰‹åŠ¨è¾“å…¥ã€‚æ”¯æŒå ä½ç¬¦ï¼Œé»˜è®¤ç”Ÿæˆ`{{baseUrl}}`
- Sendï¼šç‚¹å‡»å‘é€ä¸€æ¬¡httpè¯·æ±‚
- Config: è¯·æ±‚çš„é…ç½®ï¼Œç”±å‘é€è¯·æ±‚çš„clientæä¾›ï¼Œé»˜è®¤æ˜¯http
- Headers tab: è¯·æ±‚å¤´å‚æ•°ï¼Œä¸€èˆ¬ä¸éœ€è¦æ‰‹åŠ¨è¾“å…¥ã€‚æ”¯æŒå ä½ç¬¦å’Œå‚æ•°åº“æ“ä½œã€‚
- Params tab: åŒ…æ‹¬uriè·¯å¾„å‚æ•°ã€æŸ¥è¯¢å‚æ•°å’Œformå‚æ•°ï¼Œä¸€èˆ¬ä¸éœ€è¦æ‰‹åŠ¨è¾“å…¥ã€‚æ”¯æŒå ä½ç¬¦å’Œå‚æ•°åº“æ“ä½œã€‚
- Body tab: POST/PUT/PATCH/DELETEå¯¹åº”çš„bodyå‚æ•°ï¼Œä¸€èˆ¬ä¸éœ€è¦æ‰‹åŠ¨è¾“å…¥ã€‚
- Response tab: å±•ç¤ºhttpè¯·æ±‚è¿”å›çš„ç»“æœã€‚å†…å®¹å¯èƒ½æ˜¯æ­£å¸¸è¿”å›ã€å¼‚å¸¸è¿”å›ã€åç½®è¯·æ±‚è„šæœ¬è¿”å›ç»“æœã€‚
- Info tab: å±•ç¤ºhttpè¯·æ±‚æŠ¥æ–‡ã€‚

![](images/http_client.png)


### æœç´¢URL
- search everywhere: <kbd>Double Shift</kbd> or click **search icon**ã€‚
  - åœ¨search everywhereä¸­é€‰ä¸­å…·ä½“çš„URLåï¼ŒæŒ‰<kbd>Option</kbd>æˆ–<kbd>Alt</kbd>ï¼Œå¯è·³è½¬åˆ°service treeä¸­å¯¹åº”çš„URLã€‚
  - åœ¨è®¾ç½®ä¸­è®¾ç½®æ˜¯å¦å±•ç¤ºmoduleåç§°ã€‚
- service treeï¼šæ”¯æŒideaè‡ªèº«çš„è¾“å…¥æœç´¢

![search everywhere](images/search_everywhere.png)
![search everywhere](images/search_everywhere_with_module.png)


### é€šç”¨è®¾ç½®
æä¾›æ’ä»¶å…¨å±€çš„ä¸€äº›é…ç½®

![common setting.png](images/common_setting.png)

#### æ“ä½œè·¯å¾„ï¼š
- <kbd>Preferences(Settings)</kbd> > <kbd>Other Settings</kbd> > <kbd>RESTKit</kbd>
- <kbd>RESTKit tool window</kbd> > <kbd>toolbar</kbd> > <kbd>setting</kbd> > <kbd>Common Setting</kbd>

#### æ”¯æŒæ‰«æçš„Webæ¡†æ¶
é»˜è®¤æ”¯æŒSpring MVCï¼Œå‹¾é€‰å³å¯ç”¨ã€‚è‹¥éœ€è¦æ”¯æŒå…¶ä»–webæ¡†æ¶çš„restfulæ¥å£æ‰«æï¼Œè¯·å‚è€ƒï¼š[æ’ä»¶æ‰©å±•](#æ’ä»¶æ‰©å±•)

#### UIé…ç½®
- åœ¨search everywhereä¸­å±•ç¤ºURLçš„moduleåç§°
- ä½¿ç”¨æ¥å£æ‰€åœ¨æ–‡ä»¶åä½œä¸ºåˆ†ç»„åï¼Œé»˜è®¤ä½¿ç”¨æ¨¡å—å
- ä½¿ç”¨æ¥å£æè¿°ä½œä¸ºæ¥å£åç§°ï¼Œé»˜è®¤ä½¿ç”¨URI
- å¯ç”¨å‚æ•°åº“ï¼šé»˜è®¤å¯ç”¨ã€‚è®¾ç½®åéœ€é‡æ–°æ‰“å¼€å½“å‰é¡¹ç›®

#### è¯·æ±‚é…ç½®
- è¯·æ±‚è¶…æ—¶ï¼šè®¾ç½®è¯·æ±‚è¶…æ—¶æ—¶é•¿ï¼Œè®¾ç½®æ—¶é•¿å°äºç­‰äº0æ—¶ä¸è¶…æ—¶
- å¯ç”¨ä¿å­˜è¯·æ±‚æ—¥å¿—ï¼šé»˜è®¤ä¸å¯ç”¨ï¼Œä¿å­˜è·¯å¾„ä¸º `$PROJECT_DIR$/.idea/restkit/logs/*.log`
- è¯·æ±‚è„šæœ¬ï¼šè®¾ç½®å‰ç½®/åç½®è¯·æ±‚è„šæœ¬è·¯å¾„ã€‚å½“è¾“å…¥æ¡†ä¸ºç©ºæ—¶ï¼Œå¯åŒå‡»`Label`è‡ªåŠ¨ç”Ÿæˆè„šæœ¬ï¼Œé»˜è®¤ç”Ÿæˆè·¯å¾„ä¸ºï¼š`$PROJECT_DIR$/.idea/restkit/xxx-request Script.js`

![](images/script_setting.png)

#### å…¶ä»–é…ç½®
- æœ¬åœ°APIå­˜å‚¨è·¯å¾„

### ç¯å¢ƒå˜é‡
- ç¯å¢ƒå˜é‡è¡¨ç¤ºæå‰é…ç½®çš„ä¸€ç»„æˆ–å¤šç»„å˜é‡ï¼ŒåŒ…æ‹¬`å­—é¢é‡å˜é‡`ã€`ç›´æ¥å¼•ç”¨å˜é‡`ã€`å†…ç½®å‡½æ•°å˜é‡`å’Œ`è„šæœ¬å˜é‡`ã€‚
- å¯ç”¨äºURLã€Headersã€Paramsã€Bodyå’Œè¯·æ±‚è„šæœ¬ç­‰ã€‚
- é€šè¿‡å ä½ç¬¦æ–¹å¼æ¥å¼•ç”¨ç¯å¢ƒå˜é‡ã€‚
- æ¯ä¸ªé¡¹ç›®çš„é…ç½®ç‹¬ç«‹ï¼ˆProjectçº§åˆ«ï¼‰ï¼Œæ”¯æŒå¯¼å…¥å¯¼å‡ºã€‚

![environment.png](images/environment.png)

#### è®¾ç½®
- <kbd>Preferences(Settings)</kbd> > <kbd>Other Settings</kbd> > <kbd>RESTKit</kbd> > <kbd>Environment</kbd>
- <kbd>RESTKit tool window</kbd> > <kbd>toolbar</kbd> > <kbd>setting</kbd> > <kbd>Environment Setting</kbd>

#### æ·»åŠ 
1. ç‚¹å‡»<kbd>Add</kbd>ï¼Œè¾“å…¥å”¯ä¸€çš„ç¯å¢ƒå˜é‡ç»„åï¼Œå»ºè®®ä½¿ç”¨ç®€çŸ­åç§°ï¼Œæ¯”å¦‚`DEV`ã€`FAT`ã€`UAT`ã€`PRE`ã€`PRO`ã€‚
2. åœ¨å½“å‰ç»„ä¸‹çš„åˆ—è¡¨ä¸­å¢åŠ /åˆ é™¤/ç§»åŠ¨å˜é‡é”®å€¼å¯¹ï¼Œå¯å‹¾é€‰æ˜¯å¦å¯ç”¨ã€‚
3. é»˜è®¤ä¼šåˆ›å»º`baseUrl: http://localhost:8080`ï¼Œç”¨äºæ›¿æ¢URLè¾“å…¥æ¡†çš„`{{baseUrl}}`
4. **VALUE**ä¸ºå­—ç¬¦ä¸²ï¼Œå¯ä½¿ç”¨å†…ç½®å‡½æ•°å˜é‡å’Œè„šæœ¬å˜é‡ï¼Œå‚è§ä¸‹æ–‡è¯´æ˜ã€‚

![env_add.png](images/env_add.png)

#### å¤åˆ¶
ä»å½“å‰ç¯å¢ƒå˜é‡å¤åˆ¶ä¸€ä»½æ–°çš„ç¯å¢ƒå˜é‡ã€‚ç‚¹å‡»<kbd>Copy</kbd>ï¼Œè¾“å…¥å”¯ä¸€çš„ç¯å¢ƒå˜é‡ç»„åï¼Œå‘½åä¸èƒ½é‡å¤ã€‚

#### åˆ é™¤
åˆ é™¤å½“å‰ç¯å¢ƒå˜é‡ç»„åŠå†…å®¹ï¼Œç‚¹å‡»<kbd>Delete</kbd>ã€‚

#### å¯¼å‡º&å¯¼å…¥
1. ç‚¹å‡»<kbd>Export</kbd>å°†æœ¬é¡µé…ç½®ä¸­çš„ç¯å¢ƒå˜é‡ã€ç¯å¢ƒè„šæœ¬ã€å…¨å±€è¯·æ±‚å¤´ä»¥JSONæ ¼å¼å¤åˆ¶åˆ°å‰ªåˆ‡æ¿ã€‚
2. åœ¨éœ€è¦å¯¼å…¥ç¯å¢ƒå˜é‡çš„é¡¹ç›®ä¸­æ‰“å¼€é…ç½®é¡µé¢ï¼Œç‚¹å‡»<kbd>Import</kbd>ã€‚å¯¼å…¥çš„ç¯å¢ƒå˜é‡ä¼šæ›¿æ¢å½“å‰å·²é…ç½®çš„æ‰€æœ‰å†…å®¹ã€‚
3. è‹¥å¯¼å‡ºå¯¼å…¥è¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸ï¼Œè¯·å‚è€ƒ`Event Log`ä¸­çš„æç¤ºã€‚

#### KEY-VALUEè§„åˆ™
KEYã€VALUEå‡ä¸ºå­—ç¬¦ä¸²ï¼Œå…¶ä¸­VALUEæ”¯æŒå¼•ç”¨å˜é‡ï¼Œæ”¯æŒå¦‚ä¸‹ï¼š
- ç›´æ¥å¼•ç”¨å˜é‡ï¼šå¼•ç”¨å½“å‰ç¯å¢ƒå˜é‡ä¸­å·²å­˜åœ¨çš„é”®å€¼å¯¹ï¼Œä½¿ç”¨æ–¹å¼ï¼š`{{KEY}}`
- å†…ç½®å‡½æ•°å˜é‡ï¼šé»˜è®¤æä¾›äº†å†…ç½®å‡½æ•°ï¼Œä½¿ç”¨æ–¹å¼ï¼š`{{$functionName}}`
  - `{{$timestamp}}` å½“å‰æ—¶é—´æˆ³ï¼Œms
  - `{{$uuid}}` ç”ŸæˆUUID
- è„šæœ¬å˜é‡ï¼šç‚¹å‡»<kbd>Script Variable</kbd>ï¼Œåœ¨å¼¹å‡ºæ¡†ä¸­ç¼–è¾‘è„šæœ¬å˜é‡ã€‚ç›®å‰åªæ”¯æŒJavaè¯­è¨€ï¼Œç¼–å†™è§„åˆ™å‚è€ƒæ³¨é‡Šï¼Œæ— ç¬¬ä¸‰æ–¹åº“æ”¯æŒã€‚ä½¿ç”¨æ–¹å¼ï¼š{{$methodName$}}

```java
public class RestKitScript {

    /**
     * Your script method, no param, method name must from {{$methodName$}}.
     * Use pre-request script can be more powerful.
     *
     * @return return value should be String
     */
    public static String methodName() {
        return "";
    }

}
```

#### å…¨å±€è¯·æ±‚å¤´
é…ç½®å½“å‰é¡¹ç›®ä¸­HTTPè¯·æ±‚é»˜è®¤é™„å¸¦çš„è¯·æ±‚å¤´ã€‚

![](images/global_header.png)


### æœ¬åœ°APIåº“
- æœ¬åœ°APIåº“é€‚ç”¨äºæ‰‹åŠ¨ä¿å­˜APIï¼Œç‹¬ç«‹äºæºç æ‰«æå‡ºçš„æ¥å£ï¼Œåœ¨service treeä¸­é»˜è®¤å±•ç¤ºä¸ºLocalåˆ†ç»„ã€‚
- æ ¹æ®urlå’Œmethodç»„åˆå€¼ä½œä¸ºå”¯ä¸€æ€§åˆ¤æ–­
- é»˜è®¤å¯ç”¨ï¼Œå¯åœ¨è®¾ç½®ä¸­å…³é—­
- æ”¯æŒè·¨IDE/é¡¹ç›®åŒæ­¥ï¼ˆä¸åŒIDE/é¡¹ç›®è®¾ç½®ä¸ºæœ¬åœ°åŒä¸€æ–‡ä»¶ï¼‰

#### å±•ç¤º
![](images/local_show.png)

#### æ·»åŠ /æ›´æ–°
åœ¨Http Clientçš„ä»»æ„ç¼–è¾‘å™¨åŒºåŸŸå³é”®ï¼Œç‚¹å‡»ã€Save Apiã€‘ã€‚å·²å­˜åœ¨apiæ—¶ä¼šæç¤ºã€‚

![](images/local_save.png)

![](images/local_save2.png)

- Protocol: æ”¯æŒçš„åè®®ï¼Œé»˜è®¤æä¾›httpï¼Œå¯æ‰©å±•ï¼Œå¦‚dubbo
- Storage: å­˜å‚¨APIçš„æ–¹å¼ï¼ˆç›®çš„åœ°ï¼‰ï¼Œå¯æ‰©å±•
- Group: åˆ†ç»„å
- Description: æè¿°ï¼Œå»ºè®®ç®€çŸ­æ˜äº†
- Existed: æ˜¯å¦å·²å­˜åœ¨ï¼Œæ ¹æ®method+urlä¸€èµ·åˆ¤æ–­

#### åˆ é™¤
åœ¨åˆ—è¡¨apiä¸Šå³é”®ï¼Œåˆ é™¤

![](images/local_delete.png)

#### å¯¼å…¥/å¯¼å‡º
- å¯¼å‡º: å¯å¯¼å‡ºæ‰€æœ‰/æŒ‰æ¨¡å—/å¤šé€‰/å•ä¸ªï¼Œåˆ†åˆ«å¯¹åº”ä¸åŒæ ‘èŠ‚ç‚¹å³é”®èœå•
- å¯¼å…¥: åœ¨æ ‘æ ¹ç»“ç‚¹å³é”®èœå•å¯¼å…¥

![](images/local_export_import.png)


### å‚æ•°åº“
- å‚æ•°åº“æ˜¯ç”¨äºä¿å­˜è¯·æ±‚å‚æ•°çš„ä»“åº“ï¼Œæ”¯æŒä¿å­˜Headersã€Paramså’ŒBodyç­‰å‚æ•°ã€‚
- å‚æ•°åº“å­˜åœ¨å¤šä¸ªï¼Œ**æ¯ä¸ªå‚æ•°åº“å’ŒURLã€method å”¯ä¸€ç»‘å®š**ã€‚
- åœ¨å¯¹åº”ç¼–è¾‘å™¨å³ä¸Šè§’æœ‰ä¸¤ä¸ªå›¾æ ‡<kbd>Save</kbd>å’Œ<kbd>List</kbd>ï¼Œåˆ†åˆ«å¯¹åº” **ä¿å­˜** å’Œ **é€‰æ‹©** å‚æ•°ï¼Œå…¶ä¸­ **é€‰æ‹©** å‚æ•°çš„å›¾æ ‡ä¼šåŒæ—¶å±•ç¤ºå½“å‰ä¿å­˜è¿‡çš„æ•°é‡ã€‚

![](images/parameter1.png)

#### ä¿å­˜å‚æ•°
ä¿å­˜å½“å‰ç¼–è¾‘å¥½çš„å‚æ•°ï¼Œä»¥ä¾¿ç•™ç»™å°†æ¥ä½¿ç”¨ã€‚ç‚¹å‡»<kbd>Save</kbd>å›¾æ ‡ï¼Œè¾“å…¥å”¯ä¸€çš„åç§°ã€‚

![](images/parameter_add.png)

#### é€‰æ‹©å‚æ•°
ç‚¹å‡»<kbd>List</kbd>å›¾æ ‡ï¼Œå¯ä»¥çœ‹åˆ°å½“å‰URLå’Œmethodç»‘å®šçš„å‚æ•°åº“ã€‚

- é¼ æ ‡Hoveræ—¶ä¼šé¢„è§ˆå½“å‰é€‰æ‹©çš„å‚æ•°
- å•å‡»é¼ æ ‡å·¦é”®ï¼Œå½“å‰é€‰æ‹©å‚æ•°ä¼šæ›¿æ¢å¯¹åº”ç¼–è¾‘å™¨çš„å†…å®¹

![](images/parameter_list.png)

#### ç®¡ç†å‚æ•°
åœ¨å‚æ•°åˆ—è¡¨ä¸­ï¼Œæ¯ä¸€è¡Œå¯¹åº”ä¸€ä¸ª<kbd>Setting</kbd>å›¾æ ‡ï¼Œç‚¹å‡»å¯å¯¹è¯¥å‚æ•°é‡å‘½åå’Œåˆ é™¤ã€‚
- Replace: ä½¿ç”¨å½“å‰ç¼–è¾‘å™¨ä¸­çš„å†…å®¹æ¥æ›¿æ¢é€‰ä¸­é¡¹
- Rename
- Delete

![](images/parameter_setting.png)

#### æ¸…ç©ºæ‰€æœ‰å‚æ•°
åœ¨å½“å‰é¡¹ç›®ä¸­æ‰¾åˆ°æ–‡ä»¶ `$PROJECT_DIR$/.idea/restkit/RESTKit_ParameterLibrary.xml`ï¼Œåˆ é™¤å³å¯ã€‚


### è¯·æ±‚è„šæœ¬
åœ¨å‘é€HTTPè¯·æ±‚å‰åï¼Œå¯é€šè¿‡è„šæœ¬å¯¹è¯·æ±‚çš„å‰åå†…å®¹è¿›è¡Œæ“ä½œï¼Œæ–¹ä¾¿ä½¿ç”¨ï¼Œå¦‚å¯ä»¥æ›¿æ¢tokenã€åŠ å¯†è¯·æ±‚ç­‰ã€‚

> Note  
> è¯¥åŠŸèƒ½ä½¿ç”¨äº†Java Nashornè„šæœ¬å¼•æ“å®ç°ï¼Œè¯¥å¼•æ“è®¡åˆ’åœ¨JDK11åç§»é™¤ï¼Œæš‚æ— æ›¿æ¢å®ç°ã€‚

#### è®¾ç½®è„šæœ¬è·¯å¾„
å‚è€ƒæœ¬æ–‡ `é€šç”¨è®¾ç½®` > `è¯·æ±‚è„šæœ¬`

![](images/script_setting.png)

#### å‰ç½®è„šæœ¬

- é»˜è®¤ç”Ÿæˆçš„å‰ç½®è„šæœ¬ä½äºï¼š`$PROJECT_DIR$/.idea/restkit/Pre-request Script.js`

- ä½¿ç”¨è¯´æ˜ï¼š
```js
// You can use custom preset object request and environment, attributes are:
//
// request attributes
// url:         java.lang.String,               request url, can be modified by pre-request script.
// method:      java.lang.String,               request method, can be modified by pre-request script.
// config:      java.util.Map<String, String>,  request config, can be modified by pre-request script.
// headers:     java.util.Map<String, String>,  request headers, can be modified by pre-request script.
// params:      java.util.Map<String, String>,  request params, can be modified by pre-request script.
// body:        java.lang.String,               request body, can be modified by pre-request script.
//
// environment: java.util.Map<String, String>,  current environment, defined in the Environment setting, readonly.
//
// See more usages in nashorn-users-guide: https://docs.oracle.com/en/java/javase/12/nashorn/nashorn-users-guide.pdf
```

- ç¤ºä¾‹ï¼š
```js
var env = environment;
var baseUrl = env.baseUrl;
var username = env['username'];

var req = request;
var url = req.url;
var method = req.method;
var headers = req.headers;
var params = req.params;
var body = req.body;

req.url = 'http://httpbin.org/ip';
req.method = 'GET';
req.headers = {
    'x-auth-ts': '' + new Date().valueOf(),
    'x-auth-traceid': '83b557cc-366a-4274-8912-078e71216c51',
};
req.headers['x-auth-token'] = '70309f2cc6a6462497f824e77baa77f9';
req.params = { code: 'ABCD' };
req.params.name = 'JavaNashorn';
req.body = JSON.stringify({ reqBody: 'Hello world!' });
```

#### åç½®è„šæœ¬
- é»˜è®¤ç”Ÿæˆçš„åç½®è„šæœ¬ä½äºï¼š`$PROJECT_DIR$/.idea/restkit/Post-request Script.js`

- ä½¿ç”¨è¯´æ˜ï¼š
```js
// You can use custom preset object requestã€response and environment, attributes are:
//
// request: see pre-request script comment
//
// response attributes
// original:    org.apache.http.HttpResponse,   original http response, from http-client 4.4.
// body:        java.lang.String,               response body can be modified by post-request script.
//
// environment: java.util.Map<String, String>,  current environment, defined in the Environment setting, readonly.
//
// See more usages in nashorn-users-guide: https://docs.oracle.com/en/java/javase/12/nashorn/nashorn-users-guide.pdf
```

- ç¤ºä¾‹ï¼š
```js
var env = environment;
var baseUrl = env.baseUrl;
var username = env['username'];

var req = request;
var resp = response;
var statusCode = resp.original.getStatusLine().getStatusCode();

if (statusCode != 200) {
    resp.body = JSON.stringify({ error: 'error occurred!' });
} else {
    resp.body = JSON.parse(resp.body).origin;
}
```

#### HTTPè¯·æ±‚æ‰§è¡Œè¿‡ç¨‹

![](images/request_flow.png)


### æ’ä»¶æ‰©å±•
RESTKitä»`2.0.1`ç‰ˆæœ¬å¼€å§‹æä¾›äº†æ‰©å±•ç‚¹:
- `io.github.newhoo.restkit.restful.ep.RestfulResolverProvider` è‡ªå®šä¹‰æ‰«ærestfulæ¥å£ã€‚
- `io.github.newhoo.restkit.restful.ep.LanguageResolverProvider` è‡ªå®šä¹‰è¯­è¨€ç›¸å…³çš„æ“ä½œï¼Œå…·ä½“å‚è€ƒæºç è¯´æ˜ã€‚
- `io.github.newhoo.restkit.restful.ep.RestClientProvider` è‡ªå®šä¹‰è¯·æ±‚åè®®ï¼Œä»`2.0.3`å¼€å§‹æ”¯æŒã€‚

ä½¿ç”¨ç¤ºä¾‹ï¼š

- plugin.xml
```xml
<idea-plugin>
    ...
    <depends>io.github.newhoo.restkit</depends>

    <extensions defaultExtensionNs="io.github.newhoo.restkit">
        <!-- your restful resolver implementation -->
        <restfulResolver implementation="io.github.newhoo.restkit.feature.javaimpl.spring.SpringRequestResolver$SpringRequestResolverProvider"/>
        <languageResolver implementation="io.github.newhoo.restkit.feature.javaimpl.language.JavaLanguageResolver$JavaLanguageResolverProvider"/>
        
        <restfulResolver implementation="io.github.newhoo.restkit.ext.jaxrs.JaxrsResolverProvider"/>
    </extensions>
</idea-plugin>
```

- RestfulResolverProvider instance
```java
public class JaxrsResolverProvider implements RestfulResolverProvider {

    @Override
    public RequestResolver createRequestResolver(@NotNull Project project) {
        return project.getComponent(JaxrsResolver.class);
    }
}
```

- LanguageResolverProvider instance
```java
public class JavaLanguageResolver implements LanguageResolver {

  @NotNull
  @Override
  public Language getLanguage() {
    return JavaLanguage.INSTANCE;
  }
  
  ...

  public static class JavaLanguageResolverProvider implements LanguageResolverProvider {

    @NotNull
    @Override
    public LanguageResolver createLanguageResolver(@NotNull Project project) {
      return new JavaLanguageResolver();
    }
  }
}
```

å®Œæ•´ç¤ºä¾‹è¯·å‚é˜…ï¼šæºç å’Œ[RESTKit-JAX-RS](https://github.com/newhoo/RESTKit-JAX-RS)


### å…¶ä»–ä½¿ç”¨

#### Microservice Feature
Url navigate to service tree.

![](images/microservice_goto.png)

#### Java Methodè·³è½¬åˆ°service tree
å…‰æ ‡ç§»åˆ°Javaä¸­çš„restfulæ¥å£ï¼Œç‚¹å‡»ğŸ’¡æˆ–è€…æŒ‰<kbd>âŒ¥ â†©</kbd>

![](images/intention.png)

#### Javaç±»ç”ŸæˆJSON
åœ¨éœ€è¦ç”Ÿæˆçš„Javaç±»åç§°ä¸Šå³é”®ï¼Œåœ¨å¼¹å‡ºçš„ä¸Šä¸‹æ–‡èœå•ä¸­é€‰æ‹© `Convert to JSON`

![](images/convert2json.png)

#### å¤åˆ¶ä¸ºcurl
åœ¨http clientä»»æ„ç¼–è¾‘åŒºå³é”®èœå•ä¸­ç‚¹å‡»ã€Copy as Curlã€‘

![](images/copy_as_curl.png)

#### å¿«æ·å·¥å…·
è·¯å¾„ï¼š<kbd>Tools</kbd> > <kbd>RESTKit</kbd>

![](images/tools.png)


## è”ç³» & åé¦ˆ
[Issues](https://github.com/newhoo/RESTKit/issues) | [Email](mailto:huzunrong@foxmail.com) | [Ratings & Previews](https://plugins.jetbrains.com/plugin/14723-restkit/reviews)

> æ³¨æ„  
> åé¦ˆæ—¶è¯·åŠ¡å¿…é™„ä¸Šå¿…è¦ä¿¡æ¯ï¼šIdeaç‰ˆæœ¬ã€æ’ä»¶ç‰ˆæœ¬ã€å¼‚å¸¸å†…å®¹ã€å¤ç°æ–¹å¼(å¦‚æœæœ‰)ã€è¯‰æ±‚ç­‰ã€‚


## æ”¯æŒä½œè€…
å¦‚æœè§‰å¾—æœ¬æ’ä»¶ä¸é”™ï¼Œæå‡äº†ä½ çš„å¼€å‘æ•ˆç‡ï¼Œé‚£ä¹ˆè¯·ä½œè€…å–æ¯å’–å•¡å§ï½ä½ çš„æ”¯æŒæ˜¯é¼“åŠ±æˆ‘å‰è¡Œçš„åŠ¨åŠ›ï¼Œéå¸¸æ„Ÿè°¢ã€‚

![pay](images/pay.png)